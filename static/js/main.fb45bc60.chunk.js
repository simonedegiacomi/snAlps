(this.webpackJsonpsnalps=this.webpackJsonpsnalps||[]).push([[0],{77:function(e,t,n){},78:function(e,t,n){},92:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(39),c=n.n(i),s=(n(77),n(8)),o=n(65),u=n(115),l=n(117),p=n(119),d=n(120),j=n(121),f=(n(78),n(11)),b=n.n(f),h=n(20),x=n(105),m=n(116),v=n(106),g=(n(80),n(41)),O=n(42),k=function(){function e(){Object(g.a)(this,e)}return Object(O.a)(e,[{key:"getAllEvents",value:function(){var e=Object(h.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=[],n=1;n<=5;n++)t.push(this.getAllEventsFromPage(n));return e.next=4,Promise.all(t);case 4:return e.abrupt("return",e.sent.flatMap((function(e){return e})));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAllEventsFromPage",value:function(){var t=Object(h.a)(b.a.mark((function t(){var n,r,a,i,c,s=arguments;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.length>0&&void 0!==s[0]?s[0]:1,t.next=3,fetch("https://destinationdata.alpinebits.opendatahub.bz.it/2021-04/events?page[number]=".concat(n));case 3:return r=t.sent,t.next=6,r.json();case 6:return a=t.sent,i=a.data,t.next=10,Promise.all(i.map(e.alpineBitEventToPoi));case 10:return c=t.sent,t.abrupt("return",c.filter((function(e){return!!e.coordinates})));case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}],[{key:"alpineBitEventToPoi",value:function(){var t=Object(h.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=n.id,t.t1=n.name,t.next=4,e.findCoordinates(n);case 4:return t.t2=t.sent,t.abrupt("return",{id:t.t0,title:t.t1,coordinates:t.t2});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"findCoordinates",value:function(){var e=Object(h.a)(b.a.mark((function e(t){var n,r,a,i,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=t.relationships).venues&&n.venues.links&&n.venues.links.related){e.next=3;break}return e.abrupt("return",null);case 3:return r=n.venues.links.related,e.next=6,fetch(r);case 6:return a=e.sent,e.next=9,a.json();case 9:if(!((i=e.sent).data.length<0||!i.data[0].attributes||!i.data[0].attributes.geometries||i.data[0].attributes.geometries.length<0)){e.next=12;break}return e.abrupt("return",null);case 12:return c=i.data[0].attributes.geometries[0].coordinates,e.abrupt("return",[c[1],c[0]]);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),y=new k,w=function(){function e(){Object(g.a)(this,e)}return Object(O.a)(e,[{key:"getAllPois",value:function(){var e=Object(h.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.getAllEvents();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}(),P=new w;var C=n.p+"static/media/dot-0.4b974eba.svg",M=n.p+"static/media/dot-1.e7e732f1.svg",E=n.p+"static/media/dot-2.998e9410.svg",q=n.p+"static/media/dot-3.1c4d0b81.svg",A=n.p+"static/media/dot-4.c991be15.svg",S=n.p+"static/media/star-0.2fc7be69.svg",F=n.p+"static/media/star-1.6202c245.svg",D=n.p+"static/media/star-2.c1eea9a0.svg",I=n(24),z=n.n(I),L=[C,M,E,q,A,S,F,D].map((function(e){return z.a.icon({iconUrl:e,iconSize:[64,64],iconAnchor:[32,64]})}));var T=n(1);function B(){var e=function(){var e=Object(r.useState)([]),t=Object(s.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)(!1),c=Object(s.a)(i,2),o=c[0],u=c[1],l=function(){var e=Object(h.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.prev=1,e.next=4,P.getAllPois();case 4:t=e.sent,a(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:return e.prev=11,u(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})));return function(){return e.apply(this,arguments)}}();return{pois:n,load:l,isLoading:o}}(),t=e.pois,n=e.isLoading,a=e.load;return Object(r.useEffect)((function(){Object(h.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a();case 2:case"end":return e.stop()}}),e)})))()}),[]),Object(T.jsx)("div",{style:{flex:1},children:Object(T.jsxs)(x.a,{center:[46.4983,11.3548],zoom:13,scrollWheelZoom:!0,style:{height:"100%"},children:[Object(T.jsx)(m.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),!n&&t.map((function(e){return Object(T.jsx)(v.a,{position:e.coordinates,icon:L[Math.floor(Math.random()*L.length)]},e.id)}))]})})}var H=n(63),R=n.n(H),W=n(64),J=n.n(W),U=n.p+"static/media/map.46f5bb69.svg",Y=n.p+"static/media/conquers.7438e2e2.svg",Z=n.p+"static/media/rank.57f8e2f2.svg",G=n(114),K=n(118),N=n.p+"static/media/water.9a105fa3.png",Q=n.p+"static/media/fire.67b2db1d.png",V=n.p+"static/media/snow-cat.9ae4a1bc.png",X=n.p+"static/media/hiker.f98595a6.png",$=n.p+"static/media/history.892d3619.png",_={emblem:{width:"5em",display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center"}},ee=[{title:"AcquaMan",src:N},{title:"Fire",src:Q},{title:"Snow cat",src:V},{title:"Hiking",src:X},{title:"History",src:$}];function te(){var e=Object(r.useMemo)(ne,[]);return Object(T.jsxs)(l.a,{sx:{padding:"1em"},children:[Object(T.jsxs)(G.a,{container:!0,children:[Object(T.jsx)(G.a,{item:!0,xs:8,children:Object(T.jsxs)(l.a,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[Object(T.jsx)(K.a,{variant:"h5",children:"You Emblems"}),Object(T.jsx)(l.a,{sx:{display:"flex",flexDirection:"row"},children:e.map((function(e){var t=e.title,n=e.src;return Object(T.jsxs)(l.a,{sx:_.emblem,children:[Object(T.jsx)("img",{src:n,width:"100%"}),Object(T.jsx)(K.a,{sx:{fontWeight:"bold"},children:t})]},t)}))})]})}),Object(T.jsx)(G.a,{item:!0,xs:4,children:Object(T.jsxs)(l.a,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[Object(T.jsx)(K.a,{variant:"h5",children:"Points"}),Object(T.jsx)(K.a,{variant:"h5",children:"72"}),Object(T.jsx)(K.a,{variant:"h5",children:"Points"})]})})]}),Object(T.jsx)("hr",{}),Object(T.jsx)(K.a,{variant:"h4",children:"Conquers"})]})}function ne(){for(var e=[],t=function(){var t=ee[Math.floor(Math.random()*ee.length)];e.find((function(e){return e.title===t.title}))||e.push(t)};e.length<3;)t();return e}function re(){return Object(T.jsx)("div",{children:"Rank"})}function ae(){return Object(T.jsx)("div",{children:"Profile"})}var ie=Object(o.a)({palette:{primary:{main:"#50732f"}}});var ce=function(){var e=Object(r.useState)("conquers"),t=Object(s.a)(e,2),n=t[0],a=t[1];return Object(T.jsxs)(u.a,{theme:ie,children:[Object(T.jsxs)(l.a,{sx:{display:"flex",width:"100%",height:"100vh",flexDirection:"column"},children:["maps"===n&&Object(T.jsx)(B,{}),"conquers"===n&&Object(T.jsx)(te,{}),"rank"===n&&Object(T.jsx)(re,{}),"profile"===n&&Object(T.jsx)(ae,{})]}),Object(T.jsxs)(p.a,{showLabels:!0,value:n,sx:{position:"fixed",bottom:0,left:0,right:0,zIndex:2e3},onChange:function(e,t){a(t)},children:[Object(T.jsx)(d.a,{value:"maps",label:"Maps",icon:Object(T.jsx)("img",{alt:"Map icon",src:U})}),Object(T.jsx)(d.a,{value:"conquers",label:"Conquers",icon:Object(T.jsx)("img",{alt:"Conquers icon",src:Y})}),Object(T.jsx)(j.a,{color:"primary",sx:{marginTop:"-1.5em",minWidth:"4em",minHeight:"4em"},children:Object(T.jsx)(R.a,{})}),Object(T.jsx)(d.a,{value:"rank",label:"Rank",icon:Object(T.jsx)("img",{alt:"Rank icon",src:Z})}),Object(T.jsx)(d.a,{value:"profile",label:"Profile",icon:Object(T.jsx)(J.a,{})})]})]})},se=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,122)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),i(e),c(e)}))};n(88),n(89),n(90),n(91);c.a.render(Object(T.jsx)(a.a.StrictMode,{children:Object(T.jsx)(ce,{})}),document.getElementById("root")),se()}},[[92,1,2]]]);
//# sourceMappingURL=main.fb45bc60.chunk.js.map